# SFBT方法

| 方法   |                         | 触发条件                                                    | 建议模块     |
| ---- | ----------------------- | ------------------------------------------------------- | -------- |
| 例外情境 | 寻找问题不发生或较轻微的时刻，打破“总是如此” | exception_detected=模糊/具体                                | S3       |
| 奇迹问题 | 绕过当前问题，想象未来构筑目标         | goal_clarity=无/模糊 且 energy_score=中 且阻抗 <=0              | S2       |
| 应对问题 | 肯定用户维持现状的努力             | energy_score=低 且 talk_type=问题谈话 或者 情绪动量为负               | S1、S2、S3 |
| 关系问题 | 引入重要他人的视角，增加外部反馈维度      | 1.提及重要他人 或 self_agency=低 2.阻抗<=0                        | S2、S3    |
| 量尺问题 | 量化主观感受，用于评估现状           | energy_score=中等的/积极、有活力 且 talk_type=解决谈话 且 解决谈话趋势为上升/持平 | S3       |
| 赞美   | 基于事实肯定用户的资源、能力和努力       | cooperation_rate=合规/投入 或 self_agency=有信心 或 阻抗趋势上升       | 全阶段      |
**优先级：**
- 子阶段限制：在某一模块中，如果有优先级相同的方法，优先使用该模块建议方法
- 生存保障：energy_score=绝望、无力 或 情绪动量为负时，应对问题为最高优先级
- 黄金例外：exception_detected=具体，优先使用例外情境
- 逻辑推进：goal_clarity=具体，禁用奇迹问题，优先量尺问题
- 关系转换：趋势停滞时，引入关系问题
*注意*：
- 1.阻抗趋势明显上升时应该终止sfbt干预或者使用赞美
- 2.用户正在进行强烈情绪输出时禁止切换方法
# 特征提取

| Tag                | 定义            | 值                   |
| ------------------ | ------------- | ------------------- |
| talk_type          | 问题谈话或解决谈话     | 问题谈话/解决谈话           |
| energy_score       | 绝望、无力/积极、有动力  | 绝望、无力/中等的/积极、有活力    |
| goal_clarity       | 用户对目标的清晰度     | 缺失/模糊/具体            |
| exception_detected | 用户是否提到例外时刻    | 缺失/模糊/具体            |
| self_agency        | 用户是否认为自己有能力改变 | 缺失/不确定/有信心          |
| cooperation_rate   | 用户对上一轮提问的回应程度 | 被动/合规/投入            |
| session_phase      | 子阶段           | 合作构建/目标构建/资源挖掘/赋能行动 |
# 趋势

| 趋势     | 定义                         |
| ------ | -------------------------- |
| 解决谈话趋势 | Δ（解决谈话数/(解决谈话数+问题谈话数）)     |
| 情绪动量   | Δenergy_score+Δself_agency |
| 阻抗     | -Δcooperation_rate         |
**情绪动量和阻抗可以由llm基于上下文判断**
# SFBT阶段中的子模块

| 模块   | 功能                  | 离开条件                                                                 | 回退触发                                                                    |
| ---- | ------------------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------- |
| 合作构建 | 过渡到sfbt阶段，从叙述到解决的开始 | cooperation_rate=合规/投入 且 解决谈话趋势 >= 0                                 | cooperation_rate=被动 且阻抗<=0 或 阻抗连续3轮<0 或 情绪动量连续3轮<0 或 energy_score=绝望/无力 |
| 目标构建 | 建立“可观察的改变”，展望未来愿景   | goal_clarity=具体                                                      | energy_score=绝望、无力                                                      |
| 资源挖掘 | 寻找例外，寻找实现目标的希望      | exception_detected=具体 且 energy_score=中等的/积极、有活力 且self_agency=不确定/有信心 | 量尺分数<3继续资源挖掘,self_agency=缺失                                             |
| 赋能行动 | 把微小变化变成可持续变化        | 对话即将结束 或 self_agency = 有信心                                           |                                                                         |
# 链式动作

| 链式动作         | 逻辑                                                       |
| ------------ | -------------------------------------------------------- |
| 奇迹->关系       | 若goal_clarity=具体，追问：如果你实现了(这个奇迹)，（你身边的人）会发现你有什么不同？       |
| 例外->量尺       | 若exception_detected=具体,追问:在那个(例外)时刻，你的（）是几分？             |
| 量尺->赋能       | 发现分数较高或改善：赋能或EARS                                        |
| 例外->EARS->赞美 | 若exception_detected=具体，先EARS,再赞美：将例外总结为用户内在品质或努力的结果      |
| 量尺->关系       | 用户给出分数后，可以引入他人视角：如果你保持这个分数（），（他人）会发现你有什么不同？              |
| 奇迹->例外       | 若goal_clarity=具体，追问：在过去的一周或一个月里，这个奇迹的哪一小部分曾经出现过，哪怕只有一分钟？ |
# 策略包

| 字段               | 描述                                |
| ---------------- | --------------------------------- |
| selected_method  | 建议的干预方法名                          |
| strategic_intend | 一句话描述本轮核心目的                       |
| todo             | 本轮建议的行为（应当基于当前阶段、上下文、前一个方法或者链式动作） |
| notdo            | 本轮禁止的行为（应当基于当前阶段、上下文、前一个方法或者链式动作） |

